<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-8NGQXW18FD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-8NGQXW18FD');
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Apply ‚Äì RIQE Quantitative Finance</title>
  <link rel="canonical" href="https://riqe.org/apply" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

  <style>
    .float-btn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background-color: var(--amber); /* Uses your site's amber #bc6c25 */
    color: white !important; /* Forces white text */
    padding: 16px 30px;
    border-radius: 50px;
    font-family: 'Inter', sans-serif;
    font-weight: 700;
    font-size: 0.95rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 9999;
    box-shadow: 0 4px 15px rgba(188, 108, 37, 0.4);
    border: 2px solid white; /* Adds a clean pop against the background */
    transition: all 0.3s ease;
    animation: pulse-glow 2s infinite;
  }

  .float-btn:hover {
    transform: translateY(-5px);
    background-color: #a65d20; /* Slightly darker on hover */
    box-shadow: 0 8px 25px rgba(188, 108, 37, 0.6);
  }

  /* Pulse Animation to make it "stick out" */
  @keyframes pulse-glow {
    0% { box-shadow: 0 0 0 0 rgba(188, 108, 37, 0.7); }
    70% { box-shadow: 0 0 0 15px rgba(188, 108, 37, 0); }
    100% { box-shadow: 0 0 0 0 rgba(188, 108, 37, 0); }
  }

  /* Mobile Adjustment */
  @media (max-width: 600px) {
    .float-btn {
      bottom: 20px;
      right: 20px;
      padding: 12px 24px;
      font-size: 0.8rem;
    }
  }
    :root {
      --green-dark: #283618;
      --green-mid: #606c38;
      --cream: #fefae0;
      --gold: #dda15e;
      --amber: #bc6c25;
      --header-height: 70px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--cream);
      color: #1a1a1a;
      line-height: 1.6;
    }

    h1 { font-family: 'Libre Baskerville', serif; color: var(--green-dark); }
    a { text-decoration: none; color: inherit; transition: all 0.2s; }

    /* --- NAV --- */
    .top-bar {
      position: fixed; top: 0; left: 0; width: 100%; height: var(--header-height);
      background: rgba(254, 250, 224, 0.95); backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(40, 54, 24, 0.1); z-index: 1000;
      display: flex; align-items: center; justify-content: space-between; padding: 0 5%;
    }
    .logo-area { font-weight: 800; font-size: 1.5rem; color: var(--green-dark); font-family: 'Libre Baskerville'; }
    
    .desktop-nav { display: flex; gap: 30px; }
    .desktop-nav a { font-weight: 500; color: var(--green-dark); }
    .desktop-nav a:hover { color: var(--amber); }

    .menu-toggle { display: none; background: none; border: none; cursor: pointer; flex-direction: column; gap: 5px; }
    .bar { width: 25px; height: 2px; background: var(--green-dark); transition: 0.3s; }

    /* --- FORM LAYOUT --- */
    .apply-wrapper {
      padding: 120px 5% 60px;
      display: flex;
      justify-content: center;
    }

    .apply-card {
      background: white;
      max-width: 800px;
      width: 100%;
      border-radius: 12px;
      padding: 40px;
      box-shadow: 0 15px 30px rgba(0,0,0,0.06);
      border: 1px solid rgba(0,0,0,0.05);
    }

    .apply-card h1 { margin-bottom: 10px; font-size: 2rem; }
    .subtitle { color: #666; margin-bottom: 30px; font-size: 0.95rem; }

    form {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    .full-width { grid-column: 1 / -1; }

    label {
      display: block;
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 6px;
      color: var(--green-dark);
    }

    input, select, textarea {
      width: 100%;
      padding: 12px;
      border-radius: 6px;
      border: 1px solid #ddd;
      font-family: 'Inter', sans-serif;
      font-size: 1rem;
      background: #fafafa;
      transition: border 0.2s;
    }

    input:focus, textarea:focus {
      outline: none;
      border-color: var(--amber);
      background: white;
      box-shadow: 0 0 0 3px rgba(188, 108, 37, 0.1);
    }

    /* Custom File Upload Button */
    .file-upload-wrapper {
      position: relative;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .btn-file {
      background: #eee;
      color: #333;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      font-size: 0.9rem;
    }
    .btn-file:hover { background: #e0e0e0; }
    #file-name-display { font-size: 0.9rem; color: #666; font-style: italic; }

    .btn-submit {
      background: var(--amber);
      color: white;
      padding: 14px 30px;
      border-radius: 4px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      font-size: 1rem;
      box-shadow: 0 4px 10px rgba(188, 108, 37, 0.3);
      transition: transform 0.2s;
    }
    .btn-submit:hover { background: #a65d20; transform: translateY(-2px); }
    .btn-submit:disabled { opacity: 0.7; cursor: not-allowed; }

    /* Loading Overlay */
    .loading-overlay {
      position: fixed; inset: 0; background: rgba(255,255,255,0.9);
      display: none; justify-content: center; align-items: center; z-index: 2000;
      flex-direction: column;
    }
    .spinner {
      width: 40px; height: 40px; border: 4px solid #ddd; border-top-color: var(--amber);
      border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 15px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* RESPONSIVE */
    @media (max-width: 900px) {
      .menu-toggle { display: flex; }
      .desktop-nav { display: none; position: fixed; top: 70px; left: 0; width: 100%; background: var(--cream); flex-direction: column; padding: 20px; }
      .desktop-nav.active { display: flex; }
      form { grid-template-columns: 1fr; }
      .apply-card { padding: 25px; }
    }

    footer {
      background: var(--green-dark); color: var(--cream);
      padding: 40px 5%; text-align: center; margin-top: 40px;
    }
  </style>
</head>

<body>

  <nav class="top-bar">
    <a href="index.html" class="logo-area">RIQE</a>
    <button class="menu-toggle" aria-label="Toggle Menu">
      <div class="bar"></div><div class="bar"></div><div class="bar"></div>
    </button>
    <div class="desktop-nav">
      <a href="index.html">Home</a>
      <a href="index.html#about">About</a>
      <a href="donate.html">Donate</a>
      <a href="mailto:info@riqe.org">Contact</a>
    </div>
  </nav>

  <main class="apply-wrapper">
    <div class="apply-card">
      <h1>Apply to RIQE</h1>
      <p class="subtitle">Join our next cohort of quantitative researchers. Please fill out the form below.</p>

      <form id="riqe-apply-form">
        <div>
          <label>Full Name *</label>
          <input type="text" name="full_name" required>
        </div>

        <div>
          <label>Email *</label>
          <input type="email" name="email" required>
        </div>

        <div>
          <label>University / School</label>
          <input type="text" name="school">
        </div>

        <div>
          <label>Year</label>
          <input type="text" name="year" placeholder="e.g. Sophomore">
        </div>

        <div>
          <label>GitHub Profile</label>
          <input type="url" name="github" placeholder="https://github.com/username">
        </div>

        <div>
          <label>LinkedIn Profile</label>
          <input type="url" name="linkedin">
        </div>

        <div class="full-width">
          <label>Why are you interested in RIQE?</label>
          <textarea name="interests" rows="3" placeholder="Briefly describe your interest in quant finance/math..."></textarea>
        </div>

        <div class="full-width">
          <label>Do you anticipate needing scholarship support?</label>
          <textarea name="support" rows="2" placeholder="Optional: describe any financial considerations"></textarea>
        </div>

        <div class="full-width">
          <label>Resume (PDF) *</label>
          <div class="file-upload-wrapper">
            <input type="file" id="resume" name="resume" accept=".pdf,.doc,.docx" required style="display:none;">
            <button type="button" class="btn-file" onclick="document.getElementById('resume').click()">Choose File</button>
            <span id="file-name-display">No file selected</span>
          </div>
        </div>

        <div class="full-width" style="margin-top: 10px;">
          <button type="submit" class="btn-submit">Submit Application</button>
          <p style="font-size: 0.8rem; margin-top: 10px; color: #888;">
            By submitting, you agree to our <a href="privpolicy.html" style="text-decoration: underline;">Privacy Policy</a>.
          </p>
        </div>
      </form>
    </div>
  </main>

  <div class="loading-overlay" id="loading-overlay">
    <div class="spinner"></div>
    <div style="font-weight: 600; color: #333;">Submitting Application...</div>
    <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">Please do not close this window.</div>
  </div>

  <footer>
    <p>¬© 2025 RIQE. All rights reserved.</p>
  </footer>

  <a href="fundraiser.html" class="float-btn">
  <span>üéüÔ∏è</span> Dallas Fundraiser
</a>

  <script>
    // Navigation Toggle
    const toggle = document.querySelector('.menu-toggle');
    const nav = document.querySelector('.desktop-nav');
    toggle.addEventListener('click', () => nav.classList.toggle('active'));

    // File Name Display
    const fileInput = document.getElementById('resume');
    const fileDisplay = document.getElementById('file-name-display');
    fileInput.addEventListener('change', function() {
      if(this.files && this.files.length > 0) {
        fileDisplay.textContent = this.files[0].name;
        fileDisplay.style.color = '#333';
        fileDisplay.style.fontStyle = 'normal';
      } else {
        fileDisplay.textContent = "No file selected";
      }
    });

    // Form Logic (Preserved exactly as requested)
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx0aVLPGZeTl919kS1G02mWweVsBVf87EHB_oWa346kJZl9dyVTY8mUfOB9yPdyeOurcA/exec";
    const form = document.getElementById('riqe-apply-form');
    const overlay = document.getElementById('loading-overlay');
    const submitBtn = document.querySelector('.btn-submit');

    form.addEventListener('submit', function (e) {
      e.preventDefault();
      
      const fullName = form.full_name.value.trim();
      const email = form.email.value.trim();
      const resumeFile = form.resume.files[0];

      if (!fullName || !email || !resumeFile) {
        alert('Please fill in your name, email, and attach your resume.');
        return;
      }

      // Show Loading
      overlay.style.display = 'flex';
      submitBtn.disabled = true;

      const reader = new FileReader();
      reader.onload = function (event) {
        const arrayBuffer = event.target.result;
        const bytes = Array.from(new Uint8Array(arrayBuffer));

        const payload = {
          full_name: fullName,
          email: email,
          school: form.school.value.trim(),
          year: form.year.value.trim(),
          github: form.github.value.trim(),
          linkedin: form.linkedin.value.trim(),
          interests: form.interests.value.trim(),
          support: form.support.value.trim(),
          fileName: resumeFile.name,
          mimeType: resumeFile.type || 'application/octet-stream',
          fileBytes: bytes
        };

        fetch(SCRIPT_URL, {
          method: 'POST',
          mode: 'no-cors',
          body: JSON.stringify(payload)
        })
        .then(function () {
          overlay.style.display = 'none';
          alert('Thank you! Your application has been submitted.');
          form.reset();
          fileDisplay.textContent = "No file selected";
          submitBtn.disabled = false;
        })
        .catch(function (err) {
          console.error(err);
          overlay.style.display = 'none';
          alert('There was a problem submitting your application. Please email info@riqe.org directly.');
          submitBtn.disabled = false;
        });
      };
      
      reader.readAsArrayBuffer(resumeFile);
    });
  </script>
</body>
</html>